{"version":3,"sources":["c3_renderers.coffee"],"names":[],"mappings":"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","file":"c3_renderers.js","sourceRoot":"/source/","sourcesContent":["callWithJQuery = (pivotModule) ->\n    if typeof exports is \"object\" and typeof module is \"object\" # CommonJS\n        pivotModule require(\"jquery\"), require(\"c3\")\n    else if typeof define is \"function\" and define.amd # AMD\n        define [\"jquery\", \"c3\"], pivotModule\n    # Plain browser env\n    else\n        pivotModule jQuery, c3\n\ncallWithJQuery ($, c3) ->\n\n    makeC3Chart = (chartOpts = {}) -> (pivotData, opts) ->\n        defaults =\n            localeStrings: {vs: \"vs\", by: \"by\"}\n            c3: {}\n\n        opts = $.extend(true, {}, defaults, opts)\n        opts.c3.size ?= {}\n        opts.c3.size.width ?= window.innerWidth / 1.4\n        opts.c3.size.height ?= window.innerHeight / 1.4 - 50\n        chartOpts.type ?= \"line\"\n        chartOpts.horizontal ?= false\n        chartOpts.stacked ?= false\n\n        rowKeys = pivotData.getRowKeys()\n        rowKeys.push [] if rowKeys.length == 0\n        colKeys = pivotData.getColKeys()\n        colKeys.push [] if colKeys.length == 0\n\n        headers = (h.join(\"-\") for h in colKeys)\n        rotationAngle = 0\n\n        fullAggName = pivotData.aggregatorName\n        if pivotData.valAttrs.length\n            fullAggName += \"(#{pivotData.valAttrs.join(\", \")})\"\n\n        if chartOpts.type == \"scatter\"\n            scatterData = x:{}, y:{}, t:{}\n            attrs = pivotData.rowAttrs.concat(pivotData.colAttrs)\n            vAxisTitle = attrs[0] ? \"\"\n            hAxisTitle = attrs[1] ? \"\"\n            groupByTitle = attrs.slice(2).join(\"-\")\n            titleText = vAxisTitle\n            titleText += \" #{opts.localeStrings.vs} #{hAxisTitle}\" if hAxisTitle != \"\"\n            titleText += \" #{opts.localeStrings.by} #{groupByTitle}\" if groupByTitle != \"\"\n            for rowKey in rowKeys\n                for colKey in colKeys\n                    agg = pivotData.getAggregator(rowKey, colKey)\n                    if agg.value()?\n                        vals = rowKey.concat(colKey)\n                        series = vals.slice(2).join(\"-\")\n                        if series == \"\" then series = \"series\"\n                        scatterData.x[series] ?= []\n                        scatterData.y[series] ?= []\n                        scatterData.t[series] ?= []\n                        scatterData.y[series].push vals[0] ? 0\n                        scatterData.x[series].push vals[1] ? 0\n                        scatterData.t[series].push agg.format(agg.value())\n        else\n            numCharsInHAxis = 0\n            for x in headers\n                numCharsInHAxis += x.length\n            if numCharsInHAxis > 50\n                rotationAngle = 45\n\n            columns = []\n            for rowKey in rowKeys\n                rowHeader = rowKey.join(\"-\")\n                row = [if rowHeader == \"\" then fullAggName else rowHeader]\n                for colKey in colKeys\n                    val = parseFloat  pivotData.getAggregator(rowKey, colKey).value()\n                    if isFinite(val)\n                        if val < 1\n                            row.push val.toPrecision(3)\n                        else\n                            row.push val.toFixed(3)\n                    else\n                        row.push null\n                columns.push row\n\n            vAxisTitle = fullAggName\n\n            if chartOpts.horizontal\n                hAxisTitle = pivotData.rowAttrs.join(\"-\")\n                groupByTitle = pivotData.colAttrs.join(\"-\")\n            else\n                hAxisTitle = pivotData.colAttrs.join(\"-\")\n                groupByTitle = pivotData.rowAttrs.join(\"-\")\n            titleText = fullAggName\n            titleText += \" #{opts.localeStrings.vs} #{hAxisTitle}\" if hAxisTitle != \"\"\n            titleText += \" #{opts.localeStrings.by} #{groupByTitle}\" if groupByTitle != \"\"\n\n        title = $(\"<p>\", {style: \"text-align: center; font-weight: bold\"})\n        title.text(titleText)\n\n        params =\n            axis:\n                rotated: chartOpts.horizontal\n                y:\n                    label: vAxisTitle\n                x:\n                    label: hAxisTitle\n                    tick:\n                        rotate: rotationAngle\n                        multiline: false\n            data:\n                type: chartOpts.type\n                order: null\n            tooltip:\n                grouped: false\n            color:\n                pattern: [ \"#3366cc\", \"#dc3912\", \"#ff9900\", \"#109618\",\n                           \"#990099\", \"#0099c6\", \"#dd4477\", \"#66aa00\",\n                           \"#b82e2e\", \"#316395\", \"#994499\", \"#22aa99\",\n                           \"#aaaa11\", \"#6633cc\", \"#e67300\", \"#8b0707\",\n                           \"#651067\", \"#329262\", \"#5574a6\", \"#3b3eac\" ]\n\n\n        params = $.extend(true, {}, params, opts.c3)\n\n        if chartOpts.type == \"scatter\"\n            xs = {}\n            numSeries = 0\n            dataColumns = []\n            for s of scatterData.x\n                numSeries += 1\n                xs[s] = s+\"_x\"\n                dataColumns.push [s+\"_x\"].concat(scatterData.x[s])\n                dataColumns.push [s].concat(scatterData.y[s])\n            params.data.xs = xs\n            params.data.columns = dataColumns\n            params.axis.x.tick = fit: false\n            if numSeries == 1\n                params.legend = show: false\n            params.tooltip.format =\n                title: -> fullAggName\n                name: -> \"\"\n                value: (a,b,c,d) -> scatterData.t[c][d]\n        else\n            params.axis.x.type= 'category'\n\n            if chartOpts.horizontal\n                categories = (c.shift() for c in columns)\n                if categories.length == 1 and categories[0] == fullAggName\n                    categories = [\"\"]\n                params.axis.x.categories = categories\n                if headers.length == 1 and headers[0] == \"\"\n                    headers = [fullAggName]\n                columns.unshift(headers)\n                params.data.rows = columns\n            else\n                params.axis.x.categories = headers\n                params.data.columns = columns\n\n\n        if chartOpts.stacked\n            if chartOpts.horizontal\n                params.data.groups = [x.join(\"-\") for x in colKeys]\n            else\n                params.data.groups = [x.join(\"-\") for x in rowKeys]\n\n        renderArea = $(\"<div>\", style: \"display:none;\").appendTo $(\"body\")\n        result = $(\"<div>\").appendTo renderArea\n        params.bindto = result[0]\n        c3.generate params\n        result.detach()\n        renderArea.remove()\n        return $(\"<div>\").append title, result\n\n    $.pivotUtilities.c3_renderers =\n        \"Horizontal Bar Chart\": makeC3Chart(type: \"bar\", horizontal: true)\n        \"Horizontal Stacked Bar Chart\": makeC3Chart(type: \"bar\", stacked: true, horizontal: true)\n        \"Bar Chart\": makeC3Chart(type: \"bar\")\n        \"Stacked Bar Chart\": makeC3Chart(type: \"bar\", stacked: true)\n        \"Line Chart\": makeC3Chart()\n        \"Area Chart\": makeC3Chart(type: \"area\", stacked: true)\n        \"Scatter Chart\": makeC3Chart(type: \"scatter\")\n"]}